<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8"/>
    <title><%= Site::Settings.title %></title>
    <meta name="description" content="<%= Site::Settings.description %>"/>
    <%= csrf_meta_tags %>
    <meta name="author" content="<%= Site::Settings.author %>">

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    <style>
      <%= Site.first.stylesheet.content.html_safe %>
    </style>
  </head>

  <body>
    <div class="page_container">
      <header class="page_header" >
	<%= cell(HeaderSection::Cell::Sections, nil, current_admin: current_admin) %>
      </header>

      <nav class="main_navigation">
      	<% @visible_categories.each do |category| %>
        	<div class="main_navigation__item">
        	  <%= active_link_to category.name, category_articles_path(category), class: "main_navigation__link", class_active: "main_navigation__link--active", active: :inclusive %>
        	</div>
      	<% end %>
      </nav>

      <h1 class="current_page_header"><%= @current_page_header %></h1>

      <main>
      <%= yield %>
      </main>

      <footer class="page_footer">
	<%= cell(FooterSection::Cell::Sections, nil, current_admin: current_admin) %>
      </footer>

    </div>

    <% if admin_signed_in? %>
    <%= link_to 'Admin panel', admin_path, class: "link_to_admin_panel" %>
    <p class="link_to_admin_panel">loged as: <%= current_admin.email %></p>
    <%= link_to 'Logout', destroy_admin_session_path, method: :delete, class: "link_to_admin_panel" %>
    <% end %>

  </body>
</html>
